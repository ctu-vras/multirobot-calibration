<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2016a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>Example of using the utils in toolbox</title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.234001159668px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Menlo, monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { line-height: 26.3999996185303px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 22px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { margin-left: 3px; margin-top: 10px; margin-bottom: 4px; margin-right: 3px;  }
.S6 { line-height: 15.5926675796509px; min-height: 18px; white-space: nowrap; font-size: 12.6666669845581px; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S7 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S8 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S9 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S10 { color: rgb(64, 64, 64); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S11 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(34, 139, 34); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }

.LineNodeBlock {margin: 10px 0 10px 0;}
.LineNodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; background-color: #F7F7F7; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
.outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}
.outputRegion {}
.outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}
.inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}
.outputParagraph:empty {margin: 0;}
.inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}
.embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}
.embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}
.embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {margin-left: 5px;}
.embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: hidden;}
.embeddedOutputsSymbolicElement { overflow: initial !important;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}
.veSpecifier {}
.veContainer {}
.veSpecifierBox {height: 400px; width: 500px;}
.veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}
.veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}
.veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}
.veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}
.veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
.veVariableValueSummary {display: inline-block;}
.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}
.veMetaSummary {font-style: italic;}
.veSpecifier .veTable .scroller {overflow: hidden;}
.veSpecifier .veTable:hover .scroller {overflow: auto;}
.veSpecifier .veVariableName,.veSpecifier .veDimensionFont {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.veSpecifier .veVariableName {padding-top: 2px;}
.veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}
.veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}
.veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}
.veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}
.veSpecifier .mw_type_ListBase.showCellBorders,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper,.veSpecifier .veTable .verticalScrollSpacer,.veSpecifier .veTable .horizontalScrollSpacer {border: none;}
.veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode,.veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}
.veSpecifier .veTable .dataBody {color: #000000;}
.veSpecifier .veTable .columnHeaderNode .cell .drag,.veSpecifier .veTable .columnHeaderNode .cell .header,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}
.veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}
.veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}
.veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}
.veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.embeddedOutputsVariableElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}
.variableElement {}
.embeddedOutputsVariableElement.inlineElement {}
.inlineElement .variableElement {}
.variableValue { width: 100% !important; }
.embeddedOutputsMatrixElement {min-height: 18px; box-sizing: border-box; font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.embeddedOutputsMatrixElement .matrixElement{position: relative;}
.matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}
.embeddedOutputsMatrixElement.inlineElement {}
.embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}
.embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}
.embeddedOutputsMatrixElement.inlineElement .veVariableName {padding-top: 0;}
.inlineElement .matrixElement {max-height: 300px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer {white-space: nowrap; padding-top: 10px; margin-bottom: 3px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide {display: none;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}
.matrixElement { max-height: none !important; }
.dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}
.alertPlugin-onTextLine {visibility: hidden;}
.alertPlugin-hasTooltip .alertPlugin-warningImg,.alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}
.alertPlugin-alertLine .alertPlugin-warningElement,.alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}
.alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}
.diagnosticMessage-wrapper {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
</style></head><body><div class = "content"><div class = 'SectionBlock containment'><h1 class = "S1"><span class = "S2">Example of using the utils in toolbox</span></h1><p class = "S3"><span class = "S2">Examples of some of the important utils, which could be useful even outside existing functions</span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2">Find RT matrix to any joint</span></h2></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">Variable with created robot is needed, we can for example create a new one</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S7">rob=Robot(</span><span class = "S8">'loadMotoman'</span><span class = "S9">)</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsVariableStringElement" uid="6E786A48" data-testid="output_0" data-width="989" style="width: 1019px;"><div class="textElement"><div>rob = </div><div>&nbsp;&nbsp;Robot with properties:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name: 'motoman'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; joints: {1×61 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;structure: [1×1 struct]<br><br></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">Then choose the joint. You can take any joint from robot</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">joint</span><span class = "S9">=rob.joints{15};</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">Or find the joint by its name</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">joint=rob.findJoint(</span><span class = "S8">'EE1'</span><span class = "S9">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">joint=joint{1}; </span><span class = "S11">% The function can return more than one result, if robot include joint with the same name</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% Robot allows to find joint not just by name, but also by group, type or</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% id (in these cases there will usually be more than 1 joint returned).</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">Then you need to find all groups on the way to the root and indexes in DH arrays of these groups</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">str=[];</span></p></div><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S7">str=getIndexes(str, joint, isfield(rob.structure,</span><span class = "S8">'matrices'</span><span class = "S9">))</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsVariableStringElement" uid="344494A3" data-testid="output_1" data-width="989" style="width: 1019px;"><div class="textElement"><div>str = </div><div>&nbsp;&nbsp;&nbsp;&nbsp;DHindexes: [1×1 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parents: [1×1 struct]<br><br></div></div></div></div></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% We get that 'rightTriangle3' need to compute matrices through</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% 'rightArmSkin' and 'rightArm'</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">The last thing needed are the joint angles, for this example we can use random numbers</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">angles.rightArm=[0,1,0.5,0.3,0,0.5,0.3,0.1];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">rtMat=[];</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">With this, we can compute the RT matrix as it is in the calibration</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S9">matInt=getTFIntern(rob.structure.DH,joint,rtMat,angles, rob.structure.H0,str.DHindexes.(joint.name),str.parents, [])</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsMatrixElement" uid="902538CB" data-testid="output_2" data-width="989" style="width: 1019px;"><div class="matrixElement veSpecifier"><div class="veVariableName"><span>matInt = </span><span class="veVariableValueSummary veMetaSummary"></span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:72.5,&quot;totalColumns&quot;:4,&quot;totalRows&quot;:4,&quot;charsPerColumn&quot;:10}"><div class="variableValue" style="width: 292px;">    0.4415   -0.7533    0.4875    0.6687
   -0.8031   -0.5740   -0.1597   -0.7038
    0.4001   -0.3210   -0.8584    1.4764
         0         0         0    1.0000
</div><div class="horizontalEllipsis hide"></div><div class="verticalEllipsis hide"></div></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">or you can use the simplier function to compute the transformation</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S9">mat=getTF(rob.structure.DH,joint,rtMat,angles, rob.structure.H0)</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsMatrixElement" uid="5176810A" data-testid="output_3" data-width="989" style="width: 1019px;"><div class="matrixElement veSpecifier"><div class="veVariableName"><span>mat = </span><span class="veVariableValueSummary veMetaSummary"></span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:72.5,&quot;totalColumns&quot;:4,&quot;totalRows&quot;:4,&quot;charsPerColumn&quot;:10}"><div class="variableValue" style="width: 292px;">    0.4415   -0.7533    0.4875    0.6687
   -0.8031   -0.5740   -0.1597   -0.7038
    0.4001   -0.3210   -0.8584    1.4764
         0         0         0    1.0000
</div><div class="horizontalEllipsis hide"></div><div class="verticalEllipsis hide"></div></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">You can also get transformation to given frame</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S7">mat2=getTFtoFrame(rob.structure.DH,joint, angles, rob.structure.H0,</span><span class = "S8">'L1'</span><span class = "S9">)</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsMatrixElement" uid="2049F8AF" data-testid="output_4" data-width="989" style="width: 1019px;"><div class="matrixElement veSpecifier"><div class="veVariableName"><span>mat2 = </span><span class="veVariableValueSummary veMetaSummary"></span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:72.5,&quot;totalColumns&quot;:4,&quot;totalRows&quot;:4,&quot;charsPerColumn&quot;:10}"><div class="variableValue" style="width: 292px;">    0.6607   -0.2794   -0.6967    0.0185
   -0.6417    0.2713   -0.7174   -0.9678
    0.3894    0.9211    0.0000   -0.0000
         0         0         0    1.0000
</div><div class="horizontalEllipsis hide"></div><div class="verticalEllipsis hide"></div></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S3"><span class = "S2">And easily compute the rest then</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">joint=rob.findJoint(</span><span class = "S8">'L1'</span><span class = "S9">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">joint=joint{1};</span></p></div><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S7">mat3=getTFtoFrame(rob.structure.DH,joint, angles, rob.structure.H0,</span><span class = "S8">'base'</span><span class = "S9">)</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsMatrixElement" uid="EBD18F96" data-testid="output_5" data-width="989" style="width: 1019px;"><div class="matrixElement veSpecifier"><div class="veVariableName"><span>mat3 = </span><span class="veVariableValueSummary veMetaSummary"></span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:72.5,&quot;totalColumns&quot;:4,&quot;totalRows&quot;:4,&quot;charsPerColumn&quot;:10}"><div class="variableValue" style="width: 292px;">    0.1625   -0.8374   -0.5219   -0.1447
   -0.2590    0.4742   -0.8415   -0.2401
    0.9521    0.2720   -0.1398    1.7219
         0         0         0    1.0000
</div><div class="horizontalEllipsis hide"></div><div class="verticalEllipsis hide"></div></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment active'><p class = "S3"><span class = "S2">We can test it</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S7">disp(norm(mat-mat3*mat2,</span><span class = "S8">'fro'</span><span class = "S9">)&lt;10*eps)</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsTextElement" uid="11DD7615" data-testid="output_6" data-width="989" style="width: 1019px;"><div class="textElement">&nbsp;&nbsp; 1</div></div></div></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% Frobenius norm of matrix should be very low number (not 0 in most cases </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% beacuse of floating point numbers errors)</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2">Mass transformation of points</span></h2><p class = "S3"><span class = "S2">If you need to tranform more points to the base frame, you can use 'getPoints'.</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% We can load dataset to get everything we need</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">load(</span><span class = "S8">'Results/exampleNao/info.mat'</span><span class = "S9">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S11">% And easily transform all point from local frame to the base frame</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">newPoints=getPoints(rob.structure.DH, datasets.selftouch{1}, rob.structure.H0, 0);</span></p></div></div></div></div>
<!-- 
##### SOURCE BEGIN #####
%% Example of using the utils in toolbox
% Examples of some of the important utils, which could be useful even outside 
% existing functions
%% Find RT matrix to any joint
% Variable with created robot is needed, we can for example create a new one

rob=Robot('loadMotoman')
%% 
% Then choose the joint. You can take any joint from robot

joint=rob.joints{15};
%% 
% Or find the joint by its name

joint=rob.findJoint('EE1');
joint=joint{1}; % The function can return more than one result, if robot include joint with the same name
% Robot allows to find joint not just by name, but also by group, type or
% id (in these cases there will usually be more than 1 joint returned).
%% 
% Then you need to find all groups on the way to the root and indexes in 
% DH arrays of these groups

str=[];
str=getIndexes(str, joint, isfield(rob.structure,'matrices'))

% We get that 'rightTriangle3' need to compute matrices through
% 'rightArmSkin' and 'rightArm'
%% 
% The last thing needed are the joint angles, for this example we can use 
% random numbers

angles.rightArm=[0,1,0.5,0.3,0,0.5,0.3,0.1];
rtMat=[];
%% 
% With this, we can compute the RT matrix as it is in the calibration

matInt=getTFIntern(rob.structure.DH,joint,rtMat,angles, rob.structure.H0,str.DHindexes.(joint.name),str.parents, [])
%% 
% or you can use the simplier function to compute the transformation

mat=getTF(rob.structure.DH,joint,rtMat,angles, rob.structure.H0)
%% 
% You can also get transformation to given frame

mat2=getTFtoFrame(rob.structure.DH,joint, angles, rob.structure.H0,'L1')
%% 
% And easily compute the rest then

joint=rob.findJoint('L1');
joint=joint{1};
mat3=getTFtoFrame(rob.structure.DH,joint, angles, rob.structure.H0,'base')
%% 
% We can test it

disp(norm(mat-mat3*mat2,'fro')<10*eps)
% Frobenius norm of matrix should be very low number (not 0 in most cases 
% beacuse of floating point numbers errors)
%% Mass transformation of points
% If you need to tranform more points to the base frame, you can use 'getPoints'.

% We can load dataset to get everything we need
load('Results/exampleNao/info.mat');

% And easily transform all point from local frame to the base frame
newPoints=getPoints(rob.structure.DH, datasets.selftouch{1}, rob.structure.H0, 0);
##### SOURCE END #####
--></body></html>